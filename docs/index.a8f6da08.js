const e=document.getElementById("createUserBtn"),t=document.getElementById("inputUsername"),a=document.getElementById("inputPassword"),n=document.getElementById("displayUsernames"),s=document.getElementById("inputForMessages"),o=document.getElementById("postMessageBtn"),l=document.getElementById("messagesForUser"),d=document.getElementById("loginBtn"),i=document.getElementById("postedMessagesContainer"),u=document.getElementById("avatarIMGS"),r=document.getElementById("createUserDiv"),c=document.getElementById("postMessageContainer"),p=document.getElementById("loggedInAs"),m=document.getElementById("connectionErrorMsg");let g=document.getElementById("statusUpdatesContainer"),v=document.getElementById("profileInfoContainer");const y=document.getElementById("deleteAccBtn");t.value,a.value,s.value,u.value;async function f(){try{const e="https://socialapp-8a221-default-rtdb.europe-west1.firebasedatabase.app/.json",t=await fetch(e);return await t.json()}catch(e){console.log(e+"Connection problem"),m.innerHTML="Connection problem. Try again later"}}let b={username:t.value,password:a.value,statusUpdates:[s.value],imageURL:u.value};async function w(){y.disabled=!1;const e=`https://socialapp-8a221-default-rtdb.europe-west1.firebasedatabase.app/${t.value}.json`,n={method:"PUT",body:JSON.stringify(b={username:t.value,password:a.value,statusUpdates:s.value,imageURL:u.value}),headers:{"Content-type":"application/json; charset=UTF-8"}},o=await f();if(t.value in o)return void console.log("User already exists");if(""===t.value||""===a.value)return l.innerText="Must write something in both fields.";const d=await fetch(e,n);await d.json();l.innerText="New user created. You may login."}async function E(){const e=await f();g.innerHTML="";for(const t in e){const a=e[t].statusUpdates,n=document.createElement("p");n.innerText=`${t}: ${a}`,g?.appendChild(n)}}o.addEventListener("click",(e=>{e.preventDefault()}));let U={username:t.value,password:a.value,statusUpdates:[s.value],imageURL:u.value};console.log(s.value);let h=[];async function B(){const e=document.getElementById("inputForMessages"),t=document.getElementById("inputUsername"),a=document.getElementById("inputPassword"),n=`https://socialapp-8a221-default-rtdb.europe-west1.firebasedatabase.app/${t.value}.json`;h.push(e.value);const s={method:"PUT",body:JSON.stringify(U={username:t.value,password:a.value,statusUpdates:h,imageURL:u.value}),headers:{"Content-type":"application/json; charset=UTF-8"}},o=await fetch(n,s);await o.json();let l=document.createElement("p");l.innerText=`${t.value}${e.value}`,i?.append(l),E()}async function I(){const e=await f();Object.entries(e).forEach((e=>{const t=document.createElement("div");t.setAttribute("id","users"),t.innerText=`${e[0]}`,t.addEventListener("click",(()=>{const t=Object.values(e);v.innerHTML=`\n        <img id="profileIMG" src="${t[1].imageURL}"/><br>\n        Userprofile: ${t[1].username}<br>\n        Messages: ${t[1].statusUpdates}`})),n.appendChild(t)}))}async function T(){try{const e=`https://socialapp-8a221-default-rtdb.europe-west1.firebasedatabase.app/${document.getElementById("inputUsername").value}/statusUpdates.json`,t=await fetch(e),a=await t.json();let n;n=""===a?[]:"string"==typeof a?[a]:a}catch(e){console.log(e+"Connection problem"),m.innerHTML="Connection problem.Try again later."}}async function L(){const e=await fetch("https://socialapp-8a221-default-rtdb.europe-west1.firebasedatabase.app/.json"),s=await e.json();t.value in s&&a.value===s[t.value].password?(o.disabled=!1,l.innerText="You've successfully logged in!",r.style.display="none",p.innerHTML=`You are logged in as: ${t.value}`,c.style.display="block",y.style.display="block",n.style.display="block",g.style.display="block",T(),I(),E()):l.innerText="Wrong username, wrong password or account does not exist."}let j={username:t.value,password:a.value,statusUpdates:[s.value],imageURL:u.value};async function M(){const e=`https://socialapp-8a221-default-rtdb.europe-west1.firebasedatabase.app/${t.value}.json`,n={method:"DELETE",body:JSON.stringify(j={username:t.value,password:a.value,statusUpdates:undefined,imageURL:u.value}),headers:{"Content-type":"application/json; charset=UTF-8"}},s=await fetch(e,n);await s.json();window.location.reload()}f(),d.addEventListener("click",(e=>{e.preventDefault(),L(),E()})),e.addEventListener("click",(e=>{e.preventDefault(),w()})),o.addEventListener("click",(e=>{e.preventDefault(),B()})),y.addEventListener("click",(e=>{e.preventDefault(),M()}));
//# sourceMappingURL=index.a8f6da08.js.map
